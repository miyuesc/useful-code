import{d as $,r as w,g as z,h as V,o as I,c as Q,a as c,n as F,i as R,_ as O,j as L,b as P}from"./index-3ba489cf.js";const J={class:"canvas-chart-container"},q=["width","height"],K=$({__name:"CanvasChart",props:{type:{},data:{},width:{default:400},height:{default:300},options:{default:()=>({title:"",showGrid:!0,showAxis:!0,showLabels:!0,colors:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"],padding:{top:40,right:20,bottom:60,left:60}})}},setup(C){const o=C,T=w(),b=w(o.width*2),k=w(o.height*2);let t=null;z(()=>{M(),y()}),V(()=>o.data,()=>{R(()=>{y()})},{deep:!0}),V(()=>o.type,()=>{R(()=>{y()})});function M(){const e=T.value;e&&(t=e.getContext("2d"),t&&(t.scale(2,2),t.imageSmoothingEnabled=!0))}function y(){var f,i,a,n,u;if(!t||!o.data.length)return;t.clearRect(0,0,o.width,o.height);const e=((f=o.options)==null?void 0:f.padding)||{top:40,right:20,bottom:60,left:60},s=o.width-e.left-e.right,l=o.height-e.top-e.bottom;(i=o.options)!=null&&i.title&&S(o.options.title),(a=o.options)!=null&&a.showAxis&&A(e,s,l),(n=o.options)!=null&&n.showGrid&&D(e,s,l),o.type==="line"?d(e,s,l):o.type==="bar"&&r(e,s,l),(u=o.options)!=null&&u.showLabels&&g(e,s,l)}function S(e){t&&(t.save(),t.font="16px Arial",t.fillStyle="#333",t.textAlign="center",t.fillText(e,o.width/2,25),t.restore())}function A(e,s,l){t&&(t.save(),t.strokeStyle="#666",t.lineWidth=1,t.beginPath(),t.moveTo(e.left,e.top),t.lineTo(e.left,e.top+l),t.stroke(),t.beginPath(),t.moveTo(e.left,e.top+l),t.lineTo(e.left+s,e.top+l),t.stroke(),t.restore())}function D(e,s,l){if(!t)return;t.save(),t.strokeStyle="#e5e5e5",t.lineWidth=.5;const f=5;for(let a=0;a<=f;a++){const n=e.top+l/f*a;t.beginPath(),t.moveTo(e.left,n),t.lineTo(e.left+s,n),t.stroke()}const i=o.data.length;for(let a=0;a<=i;a++){const n=e.left+s/i*a;t.beginPath(),t.moveTo(n,e.top),t.lineTo(n,e.top+l),t.stroke()}t.restore()}function d(e,s,l){var n,u,x,v;if(!t||!o.data.length)return;const f=Math.max(...o.data.map(h=>h.value)),i=Math.min(...o.data.map(h=>h.value)),a=f-i||1;t.save(),t.strokeStyle=((u=(n=o.options)==null?void 0:n.colors)==null?void 0:u[0])||"#3b82f6",t.fillStyle=((v=(x=o.options)==null?void 0:x.colors)==null?void 0:v[0])||"#3b82f6",t.lineWidth=2,t.beginPath(),o.data.forEach((h,p)=>{const m=e.left+s/(o.data.length-1)*p,_=e.top+l-(h.value-i)/a*l;p===0?t.moveTo(m,_):t.lineTo(m,_)}),t.stroke(),o.data.forEach((h,p)=>{const m=e.left+s/(o.data.length-1)*p,_=e.top+l-(h.value-i)/a*l;t.beginPath(),t.arc(m,_,4,0,Math.PI*2),t.fill()}),t.restore()}function r(e,s,l){if(!t||!o.data.length)return;const f=Math.max(...o.data.map(n=>n.value)),i=s/o.data.length*.8,a=s/o.data.length*.2;t.save(),o.data.forEach((n,u)=>{var m,_,B,G;const x=n.color||((G=(m=o.options)==null?void 0:m.colors)==null?void 0:G[u%(((B=(_=o.options)==null?void 0:_.colors)==null?void 0:B.length)||1)])||"#3b82f6",v=n.value/f*l,h=e.left+u*(i+a)+a/2,p=e.top+l-v;t.fillStyle=x,t.fillRect(h,p,i,v),t.fillStyle="#333",t.font="12px Arial",t.textAlign="center",t.fillText(n.value.toString(),h+i/2,p-5)}),t.restore()}function g(e,s,l){if(!t)return;t.save(),t.fillStyle="#666",t.font="12px Arial",t.textAlign="center",o.data.forEach((a,n)=>{let u;if(o.type==="line")u=e.left+s/(o.data.length-1)*n;else{const v=s/o.data.length*.8,h=s/o.data.length*.2;u=e.left+n*(v+h)+h/2+v/2}const x=e.top+l+20;t.fillText(a.label,u,x)});const f=Math.max(...o.data.map(a=>a.value)),i=5;t.textAlign="right";for(let a=0;a<=i;a++){const n=f/i*a,u=e.top+l-l/i*a+4;t.fillText(Math.round(n).toString(),e.left-10,u)}t.restore()}function N(e){e.preventDefault()}function W(e){e.preventDefault()}function j(e){e.preventDefault()}return(e,s)=>(I(),Q("div",J,[c("canvas",{ref_key:"canvasRef",ref:T,width:b.value,height:k.value,style:F({width:C.width+"px",height:C.height+"px"}),onTouchstart:N,onTouchmove:W,onTouchend:j},null,44,q)]))}});const E=O(K,[["__scopeId","data-v-c8667e6c"]]),U={class:"chart-demo"},X={class:"demo-section"},Y={class:"chart-container"},Z={class:"demo-section"},H={class:"chart-container"},tt={class:"demo-section"},et={class:"chart-container"},ot=$({__name:"ChartDemo",setup(C){const o=w([{label:"1月",value:120},{label:"2月",value:200},{label:"3月",value:150},{label:"4月",value:300},{label:"5月",value:250},{label:"6月",value:400}]),T=L({title:"月度销售趋势",showGrid:!0,showAxis:!0,showLabels:!0,colors:["#3b82f6"],padding:{top:50,right:30,bottom:70,left:70}}),b=w([{label:"产品A",value:85,color:"#3b82f6"},{label:"产品B",value:120,color:"#ef4444"},{label:"产品C",value:95,color:"#10b981"},{label:"产品D",value:160,color:"#f59e0b"},{label:"产品E",value:75,color:"#8b5cf6"}]),k=L({title:"产品销量对比",showGrid:!0,showAxis:!0,showLabels:!0,colors:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"],padding:{top:50,right:30,bottom:70,left:70}}),t=w([{label:"Q1",value:2500,color:"#ff6b6b"},{label:"Q2",value:3200,color:"#4ecdc4"},{label:"Q3",value:2800,color:"#45b7d1"},{label:"Q4",value:3800,color:"#96ceb4"}]),M=L({title:"季度营收统计（万元）",showGrid:!0,showAxis:!0,showLabels:!0,colors:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4"],padding:{top:60,right:40,bottom:80,left:80}});function y(){o.value=o.value.map(d=>({...d,value:Math.floor(Math.random()*400)+50}))}function S(){const d=["7月","8月","9月","10月","11月","12月"],r=o.value.length;r<12&&o.value.push({label:d[r-6]||`${r+1}月`,value:Math.floor(Math.random()*400)+50})}function A(){b.value=b.value.map(d=>({...d,value:Math.floor(Math.random()*200)+50}))}function D(){const d=["产品F","产品G","产品H","产品I","产品J"],r=["#ff9f43","#00d2d3","#ff6b6b","#5f27cd","#00a8ff"],g=b.value.length;g<10&&b.value.push({label:d[g-5]||`产品${String.fromCharCode(65+g)}`,value:Math.floor(Math.random()*200)+50,color:r[g%r.length]})}return(d,r)=>(I(),Q("div",U,[r[3]||(r[3]=c("h1",null,"Canvas 图表组件演示",-1)),c("div",X,[r[0]||(r[0]=c("h2",null,"折线图",-1)),c("div",Y,[P(E,{type:"line",data:o.value,width:400,height:300,options:T},null,8,["data","options"])]),c("div",{class:"controls"},[c("button",{onClick:y},"更新数据"),c("button",{onClick:S},"添加数据点")])]),c("div",Z,[r[1]||(r[1]=c("h2",null,"柱状图",-1)),c("div",H,[P(E,{type:"bar",data:b.value,width:400,height:300,options:k},null,8,["data","options"])]),c("div",{class:"controls"},[c("button",{onClick:A},"更新数据"),c("button",{onClick:D},"添加数据点")])]),c("div",tt,[r[2]||(r[2]=c("h2",null,"自定义样式图表",-1)),c("div",et,[P(E,{type:"bar",data:t.value,width:500,height:350,options:M},null,8,["data","options"])])])]))}});const lt=O(ot,[["__scopeId","data-v-5e846a4a"]]);export{lt as default};
